# Ссылка на видео с демонстрацией работы 

https://drive.google.com/file/d/1smHzBiEsSaOee5fx_fL7_vxxb4WJ0Pp_/view?usp=sharing

![Screenshot](https://github.com/Mishanya666/Internet-of-Things/blob/main/BounceProcessing/1Kqno08rMPU.jpg)

---

# Описание кода для обработки нажатия кнопки с устранением дребезга и измерением времени удержания

Этот код написан для платформы Arduino и предназначен для обработки нажатий кнопки с устранением дребезга контактов, а также для измерения времени удержания кнопки. Ниже приведено подробное описание работы кода.

---

## Основные компоненты кода

### 1. **Определения и переменные**

- **`BUTTON_PIN`**: Пин, к которому подключена кнопка.
- **`BOUNCE_TIME`**: Время, в течение которого игнорируются изменения состояния кнопки для устранения дребезга.
- **`PRESSED`**: Состояние кнопки при нажатии.
- **`volatile`**: Указывает, что переменные могут изменяться в прерываниях.

---

### 2. **Функция `setup()`**

- **`pinMode(BUTTON_PIN, INPUT)`**: Настраивает пин кнопки как вход.
- **`Serial.begin(9600)`**: Инициализирует Serial для вывода данных в монитор порта.
- **`attachInterrupt`**: Настраивает прерывание на пине кнопки. Прерывание срабатывает на фронте сигнала (RISING), то есть при нажатии кнопки.

---

### 3. **Функция `loop()`**

- **`report_to_user`**: Если флаг установлен, выводится сообщение о возможном нажатии.
- **Проверка на дребезг**: Если с момента последнего нажатия прошло больше времени, чем `BOUNCE_TIME`, и кнопка все еще нажата, это считается реальным нажатием.
- **Измерение времени удержания**: После подтверждения нажатия код ожидает отпускания кнопки и вычисляет время удержания.

---

### 4. **Функция `process_button_click()`**

- Эта функция вызывается при нажатии кнопки.
- **`press_time`**: Записывает текущее время нажатия.
- **`pressed_candidate`**: Устанавливает флаг, указывающий на возможное нажатие.
- **`report_to_user`**: Устанавливает флаг для вывода сообщения в `loop()`.

---

## Принцип работы

1. **Прерывание при нажатии**:
   - При нажатии кнопки срабатывает прерывание, вызывается функция `process_button_click()`.
   - Время нажатия записывается в `press_time`, устанавливаются флаги `pressed_candidate` и `report_to_user`.

2. **Устранение дребезга**:
   - В `loop()` проверяется, прошло ли время `BOUNCE_TIME` с момента нажатия.
   - Если кнопка все еще нажата, это считается реальным нажатием.

3. **Измерение времени удержания**:
   - После подтверждения нажатия код ожидает отпускания кнопки и вычисляет время удержания.

4. **Вывод данных**:
   - В Serial Monitor выводятся сообщения о нажатии и времени удержания.
